
    def fetch_funding_rate(self, symbol: str) -> float:
        """
        Fetch Current Funding Rate for a symbol.
        Used for Short Squeeze detection (Negative Funding = Shorts paying Longs).
        Returns the funding rate as a decimal (e.g., 0.0001 = 0.01%).
        """
        if config.TRADING_MODE != 'FUTURES':
            return 0.0

        # Simple Cache (Funding rates strictly change every 1-4-8h depending on exchange)
        # We can cache for ~15 mins safely.
        cache_key = f"funding_{symbol}"
        now = time.time()
        
        if cache_key in self._ticker_cache:  # reusing ticker cache dict for simplicity or dedicated? 
             # Let's use a dedicated cache or just check timestamp
             pass 

        # Let's use a proper simple cache
        if not hasattr(self, '_funding_cache'):
             self._funding_cache = {}
        
        if cache_key in self._funding_cache:
             entry = self._funding_cache[cache_key]
             if now - entry['ts'] < 900: # 15 min TTL
                 return entry['rate']

        for attempt in range(3):
            try:
                # CCXT Unified
                # Check if exchange supports it
                if self.exchange.has['fetchFundingRate']:
                     exec_symbol = config.KRAKEN_SYMBOL_MAP.get(symbol, symbol)
                     data = self.exchange.fetch_funding_rate(exec_symbol)
                     rate = float(data.get('fundingRate', 0.0))
                     
                     # Update Cache
                     self._funding_cache[cache_key] = {'rate': rate, 'ts': now}
                     return rate
                else:
                     return 0.0
                     
            except Exception as e:
                # print(f"[{self.name}] ⚠️ Funding Rate Fetch Fail: {e}")
                time.sleep(1)
        
        return 0.0
